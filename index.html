<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Range Input Component</title>
    <link rel="stylesheet" href="style.css" />
    <style>
        /* A demonstration of styling the web component using CSS Parts */
        range-group {
            /* These are custom properties the component uses internally */
            /*--track-height: 8px;*/
            /*--thumb-size: 28px;*/
            /*--thumb-bg: oklch(70% 0.28 260); !* Bright Indigo *!*/
            /*--tick-color: oklch(60% 0.02 230);*/
            /*--tick-label-color: oklch(70% 0.02 230);*/

            /* General component styling */
            width: 100%;
            display: block;
        }

        /* Styling the component parts from the outside */
        range-group::part(track) {
            background-color: oklch(25% 0.02 230);
            border-radius: 9999px;
        }

        range-group::part(thumb) {
            border: 2px solid oklch(95% 0.01 230);
            border-radius: 50%;
        }
    </style>
</head>
<body>
<div class="container-wrapper">
    <div class="main-container">
        <header class="header">
            <h1>The Future of Range Inputs</h1>
            <p class="subtitle">
                A Lit web component implementation of the proposed <code>&lt;rangegroup&gt;</code> element.
                <a href="https://open-ui.org/components/enhanced-range-input.explainer/" target="_blank">Read the rangegroup explainer</a>
            </p>
        </header>

        <div class="sections-container">
            <section>
                <p class="description">
                    A common use case for selecting a minimum and maximum value. The segment between the handles
                    is styled differently.
                </p>
                <div class="card">
                    <style>
                        #price-range::part(segment-1) {
                            background-color: oklch(35% 0.02 230);
                        }
                        #price-range::part(segment-2) {
                            background-color: var(--color-purple);
                        }
                        #price-range::part(segment-3) {
                            background-color: oklch(35% 0.02 230);
                        }
                    </style>
                    <range-group id="price-range" min="0" max="1000">
                        <legend slot="legend" class="color-purple">Dual-Handle Base Example</legend>
                        <label for="price-min-input" class="visually-hidden">Minimum Price</label>
                        <input type="range" id="price-min-input" name="price-min" value="250" />
                        <label for="price-max-input" class="visually-hidden">Maximum Price</label>
                        <input type="range" id="price-max-input" name="price-max" value="750" />
                    </range-group>
                </div>
            </section>
            <section>
                <p class="description">
                    Demonstrates two-way data binding. Drag the handles to update the input fields, or type in
                    the fields to move the handles.
                </p>
                <div class="card">
                    <style>
                        #interactive-price-range::part(segment-2) {
                            background: var(--color-teal);
                        }
                        #interactive-price-range::part(thumb) {
                            --thumb-bg: var(--color-teal);
                        }
                    </style>
                    <range-group id="interactive-price-range" min="0" max="1000">
                        <legend slot="legend" class="color-teal">Interactive Price Range</legend>
                        <label for="interactive-price-min-input" class="visually-hidden">Minimum Price</label>
                        <input type="range" id="interactive-price-min-input" name="price-min" value="250" />
                        <label for="interactive-price-max-input" class="visually-hidden">Maximum Price</label>
                        <input type="range" id="interactive-price-max-input" name="price-max" value="750" />
                    </range-group>
                    <div class="price-input-container">
                        <div class="price-input-group">
                            <label for="price-min-num-input">Min Price</label>
                            <input type="number" id="price-min-num-input" min="0" max="1000" />
                        </div>
                        <div class="price-input-group">
                            <label for="price-max-num-input">Max Price</label>
                            <input type="number" id="price-max-num-input" min="0" max="1000" />
                        </div>
                    </div>
                </div>
            </section>
            <section>
                <p class="description">You could use stepbetween to prevent thumbs form colliding.</p>
                <div class="card">
                    <style>
                        #stepbetween-example::part(segment-1) {
                            background-color: oklch(0.554 0.104 233.66);
                        }
                        #stepbetween-example::part(segment-2) {
                            background-color: oklch(0.849 0.288 142.427);
                        }
                        #stepbetween-example::part(segment-3) {
                            background-color: oklch(0.554 0.104 233.66);
                        }
                    </style>
                    <range-group id="stepbetween-example" min="0" max="100" stepbetween="10">
                        <legend slot="legend" class="color-pink">Dual-Handle with 10 stepbetween</legend>

                        <label for="price-min-input-stepbetween" class="visually-hidden">Minimum Price</label>
                        <input type="range" id="price-min-input-stepbetween" name="price-min" value="50" />
                        <label for="price-max-input-stepbetween" class="visually-hidden">Maximum Price</label>
                        <input type="range" id="price-max-input-stepbetween" name="price-max" value="80" />
                    </range-group>
                </div>
            </section>
            <section>
                <p class="description">
                    A common use case for selecting a minimum and maximum value. The segment between the handles
                    is styled differently.
                </p>
                <div class="card">
                    <style>
                        #price-range::part(segment-1) {
                            background-color: #ccc;
                        }
                        #price-range::part(segment-2) {
                            background-color: hotpink;
                        }
                        #price-range::part(segment-3) {
                            background-color: #ccc;
                        }
                        #price-range::part(segment-4) {
                            background-color: hotpink;
                        }
                        #price-range::part(segment-5) {
                            background-color: #ccc;
                        }
                    </style>
                    <range-group id="price-range" min="0" max="1000">
                        <legend slot="legend" class="color-purple">Opening hours</legend>
                        <label for="price-min-input" class="visually-hidden">morning start</label>
                        <input type="range" id="price-min-input" name="price-min" value="250" />
                        <label for="price-max-input" class="visually-hidden">Maximum Price</label>
                        <input type="range" id="price-max-input" name="price-max" value="750" />
                    </range-group>
                </div>
            </section>
            <section>
                <p class="description">
                    Demonstrates multiple handles and custom-colored segments for different temperature zones.
                </p>
                <div class="card">
                    <style>
                        #temp-range::part(segment-1) {
                            background-color: oklch(65% 0.25 260);
                        }
                        #temp-range::part(segment-2) {
                            background-color: oklch(80% 0.25 180);
                        }
                        #temp-range::part(segment-3) {
                            background-color: oklch(85% 0.25 90);
                        }
                        #temp-range::part(segment-4) {
                            background-color: oklch(70% 0.28 25);
                        }

                        #temp-range::part(thumb-1) {
                            --thumb-bg: oklch(65% 0.25 260);
                            border: 2px solid oklch(98% 0.01 230);
                            box-shadow: 0 0 12px 4px oklch(65% 0.25 260 / 0.75);
                        }
                        #temp-range::part(thumb-2) {
                            --thumb-bg: oklch(85% 0.25 90);
                            border: 2px solid oklch(98% 0.01 230);
                            box-shadow: 0 0 12px 4px oklch(85% 0.25 90 / 0.75);
                        }
                        #temp-range::part(thumb-3) {
                            --thumb-bg: oklch(70% 0.28 25);
                            border: 2px solid oklch(98% 0.01 230);
                            box-shadow: 0 0 12px 4px oklch(70% 0.28 25 / 0.75);
                        }
                    </style>
                    <range-group id="temp-range" min="-100" max="100">
                        <legend slot="legend" class="color-indigo">Multi-Handle Temperature Control</legend>

                        <label for="temp-cold-input" class="visually-hidden">Cold temperature bound</label>
                        <input type="range" id="temp-cold-input" name="temp-cold" value="-50" />
                        <label for="temp-mild-input" class="visually-hidden">Mild temperature bound</label>
                        <input type="range" id="temp-mild-input" name="temp-mild" value="0" />
                        <label for="temp-hot-input" class="visually-hidden">Hot temperature bound</label>
                        <input type="range" id="temp-hot-input" name="temp-hot" value="50" />
                    </range-group>
                </div>
            </section>
            <section>
                <p class="description">
                    Demonstrates using invisible handles with the CSS Anchoring API to position custom tooltips. The tooltips appear to be the draggable handles, and their values are updated via JavaScript.
                </p>
                <div class="card" style="position: relative">
                    <style>
                        #floating-tooltip-range {
                            --track-height: 12px;
                            --thumb-size: 40px;
                            margin-top: 2rem;
                            margin-bottom: 2rem;
                        }
                        #floating-tooltip-range::part(track) {
                            background-color: oklch(40% 0.02 230);
                        }
                        #floating-tooltip-range::part(segment-2) {
                            background: var(--color-pink);
                        }

                        #floating-tooltip-range::part(thumb) {
                            anchor-name: var(--anchor-name);
                            background: transparent;
                            border: none;
                            box-shadow: none;
                            width: 40px;
                            height: 20px;
                            padding: 0;
                            border-radius: 9999px;
                        }

                        #floating-tooltip-range::part(thumb-1) {
                            --thumb-transform: translate(-50%, calc(-100% - var(--track-height) / 2 - 5px));
                            --anchor-name: --floating-thumb-1;
                            transform: var(--thumb-transform);
                        }

                        #floating-tooltip-range::part(thumb-2) {
                            --thumb-transform: translate(-50%, calc(0% + var(--track-height) / 2 + 5px));
                            --anchor-name: --floating-thumb-2;
                            transform: var(--thumb-transform);
                        }

                        /* Tooltip styling */
                        .floating-tooltip {
                            position: absolute;
                            position-anchor: var(--anchor-name);
                            pointer-events: none;

                            /* These styles create the tooltip shape */
                            border: none;
                            border-radius: 9999px;
                            background: white;
                            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -1px rgb(0 0 0 / 0.1);
                            width: 40px;
                            height: 28px;

                            color: oklch(10% 0.01 230);
                            font-weight: 700;
                            font-size: 0.875rem;
                            display: flex;
                            align-items: center;
                            justify-content: center;

                            translate: -50% -20%;
                            z-index: 10;
                        }

                        #floating-tooltip-1 {
                            --anchor-name: --floating-thumb-1;
                            bottom: anchor(top);
                            left: anchor(left);
                        }
                        #floating-tooltip-2 {
                            --anchor-name: --floating-thumb-2;
                            top: anchor(center);
                            left: anchor(left);
                        }

                    </style>
                    <range-group id="floating-tooltip-range" min="0" max="100">
                        <legend slot="legend" class="color-purple">Floating Tooltip Handles</legend>
                        <label for="floating-tooltip-input-1" class="visually-hidden">Value Handle 1</label>
                        <input
                                type="range"
                                id="floating-tooltip-input-1"
                                name="floating-tooltip-1"
                                value="40"
                        />
                        <label for="floating-tooltip-input-2" class="visually-hidden">Value Handle 2</label>
                        <input
                                type="range"
                                id="floating-tooltip-input-2"
                                name="floating-tooltip-2"
                                value="65"
                        />
                    </range-group>
                    <div id="floating-tooltip-1" class="floating-tooltip" aria-hidden="true">40</div>
                    <div id="floating-tooltip-2" class="floating-tooltip" aria-hidden="true">65</div>
                </div>
            </section>
            <section>
                <p class="description">
                    Shows integration with a <code>&lt;datalist&gt;</code> for tick marks and labels, and
                    enforces a minimum distance of 25 between handles via <code>stepbetween="25"</code>.
                </p>
                <div class="card">
                    <range-group min="0" max="100" list="rating-ticks" stepbetween="25">
                        <legend slot="legend" class="color-teal">Datalist Integration & Step Between</legend>
                        <label for="rating-min-input" class="visually-hidden">Minimum rating</label>
                        <input type="range" id="rating-min-input" name="rating-min" value="20" />
                        <label for="rating-max-input" class="visually-hidden">Maximum rating</label>
                        <input type="range" id="rating-max-input" name="rating-max" value="80" />
                    </range-group>
                    <datalist id="rating-ticks">
                        <option value="0" label="0%"></option>
                        <option value="25"></option>
                        <option value="50" label="50%"></option>
                        <option value="75"></option>
                        <option value="100" label="100%"></option>
                    </datalist>
                </div>
            </section>
            <section>
                <p class="description">
                    An opening hours selector with four handles to define morning and afternoon shifts. The segments between handles are styled to show open/closed times, with a datalist showing hourly labels and enabling half-hour steps.
                </p>
                <div class="card">
                    <style>
                        #opening-hours-range::part(segment-1),
                        #opening-hours-range::part(segment-3),
                        #opening-hours-range::part(segment-5) {
                            background-color: oklch(35% 0.02 230); /* Muted track */
                        }
                        #opening-hours-range::part(segment-2),
                        #opening-hours-range::part(segment-4) {
                            background-color: var(--color-teal);
                        }
                        #opening-hours-range::part(thumb) {
                            --thumb-bg: var(--color-teal);
                        }

                        /*nth capability would be handy for this*/
                        #opening-hours-range::part(tick-label-2),
                        #opening-hours-range::part(tick-label-4),
                        #opening-hours-range::part(tick-label-6),
                        #opening-hours-range::part(tick-label-8),
                        #opening-hours-range::part(tick-label-10),
                        #opening-hours-range::part(tick-label-12),
                        #opening-hours-range::part(tick-label-14),
                        #opening-hours-range::part(tick-label-16),
                        #opening-hours-range::part(tick-label-18),
                        #opening-hours-range::part(tick-label-20),
                        #opening-hours-range::part(tick-label-22),
                        #opening-hours-range::part(tick-label-24),
                        #opening-hours-range::part(tick-label-26),
                        #opening-hours-range::part(tick-label-28) {
                            display: none;
                        }

                        #opening-hours-range::part(tick-label-29) {
                            white-space: nowrap;
                        }
                    </style>
                    <range-group id="opening-hours-range" min="480" max="1320" list="hours-ticks" stepbetween="30">
                        <legend slot="legend" class="color-purple">Opening Hours Selector</legend>

                        <label for="hours-am-start" class="visually-hidden">AM Open</label>
                        <input type="range" id="hours-am-start" value="540" />
                        <label for="hours-am-end" class="visually-hidden">AM Close</label>
                        <input type="range" id="hours-am-end" value="720" />
                        <label for="hours-pm-start" class="visually-hidden">PM Open</label>
                        <input type="range" id="hours-pm-start" value="780" />
                        <label for="hours-pm-end" class="visually-hidden">PM Close</label>
                        <input type="range" id="hours-pm-end" value="1020" />
                    </range-group>
                    <datalist id="hours-ticks">
                        <option value="480" label="8 AM"></option><option value="510" label="8:30 AM"></option>
                        <option value="540" label="9 AM"></option><option value="570" label="9:30 AM"></option>
                        <option value="600" label="10 AM"></option><option value="630" label="10:30 AM"></option>
                        <option value="660" label="11 AM"></option><option value="690" label="11:30 AM"></option>
                        <option value="720" label="12 PM"></option><option value="750" label="12:30 PM"></option>
                        <option value="780" label="1 PM"></option><option value="810" label="1:30 PM"></option>
                        <option value="840" label="2 PM"></option><option value="870" label="2:30 PM"></option>
                        <option value="900" label="3 PM"></option><option value="930" label="3:30 PM"></option>
                        <option value="960" label="4 PM"></option><option value="990" label="4:30 PM"></option>
                        <option value="1020" label="5 PM"></option><option value="1050" label="5:30 PM"></option>
                        <option value="1080" label="6 PM"></option><option value="1110" label="6:30 PM"></option>
                        <option value="1140" label="7 PM"></option><option value="1170" label="7:30 PM"></option>
                        <option value="1200" label="8 PM"></option><option value="1230" label="8:30 PM"></option>
                        <option value="1260" label="9 PM"></option><option value="1290" label="9:30 PM"></option>
                        <option value="1320" label="10 PM"></option>
                    </datalist>
                    <div id="hours-output" class="api-output" style="margin-top: 1.5rem;"></div>
                </div>
            </section>
            <section>
                <p class="description">
                    Each thumb can have its own `min` and `max` attributes, creating individual constraints.
                    The thumb's movement will be restricted to the tighter of its own bounds and the overall
                    component's bounds.
                </p>
                <div class="card">
                    <style>
                        #constraints-example-1::part(segment-1),
                        #constraints-example-1::part(segment-3) {
                            background-color: oklch(35% 0.02 230); /* Muted track */
                        }
                        #constraints-example-1::part(segment-2) {
                            background-color: var(--color-orange);
                        }
                        #constraints-example-1::part(thumb) {
                            --thumb-bg: var(--color-orange);
                        }
                    </style>
                    <range-group id="constraints-example-1" min="0" max="300">
                        <legend slot="legend" class="color-orange">Thumb Constraints</legend>
                        <label for="c1-min-input" class="visually-hidden">Min value with constraint</label>
                        <input type="range" id="c1-min-input" name="c1-min" value="100" min="50" />
                        <label for="c1-max-input" class="visually-hidden">Max value with constraint</label>
                        <input type="range" id="c1-max-input" name="c1-max" value="200" max="250" />
                    </range-group>
                </div>
            </section>
            <section>
                <p class="description">
                    If a thumb's `min` or `max` exceeds the range of the component, it will be constrained by the component's bounds. Here, the track is 100-200, but the thumbs try to go from 0-300.
                </p>
                <div class="card">
                    <style>
                        #constraints-example-2::part(segment-2) {
                            background: var(--color-yellow);
                        }
                        #constraints-example-2::part(thumb) {
                            --thumb-bg: var(--color-yellow);
                        }
                    </style>
                    <range-group id="constraints-example-2" min="100" max="200">
                        <legend slot="legend" class="color-yellow">Parent Override Constraints</legend>
                        <label for="c2-min-input" class="visually-hidden">Min value (constrained by parent)</label>
                        <input type="range" id="c2-min-input" name="c2-min" value="125" min="0" />
                        <label for="c2-max-input" class="visually-hidden">Max value (constrained by parent)</label>
                        <input type="range" id="c2-max-input" name="c2-max" value="175" max="300" />
                    </range-group>
                </div>
            </section>
            <section>
                <p class="description">
                    A complex example with three handles. The middle handle is constrained to a small central zone (30-70), while the outer handles have full range and can push the middle one.
                </p>
                <div class="card">
                    <style>
                        #constraints-example-3::part(segment-1) { background-color: #3949ab; }
                        #constraints-example-3::part(segment-2) { background-color: var(--color-orange); }
                        #constraints-example-3::part(segment-3) { background-color: var(--color-yellow); }
                        #constraints-example-3::part(segment-4) { background-color: #3949ab; }

                        #constraints-example-3::part(thumb-1) { --thumb-bg: #3949ab; }
                        #constraints-example-3::part(thumb-2) { --thumb-bg: var(--color-orange); }
                        #constraints-example-3::part(thumb-3) { --thumb-bg: var(--color-yellow); }
                    </style>
                    <range-group id="constraints-example-3" min="0" max="100">
                        <legend slot="legend" class="color-orange">Multi-Handle Constraints</legend>

                        <label for="c3-h1-input" class="visually-hidden">Handle 1</label>
                        <input type="range" id="c3-h1-input" name="c3-h1" value="15" />
                        <label for="c3-h2-input" class="visually-hidden">Handle 2 (constrained)</label>
                        <input type="range" id="c3-h2-input" name="c3-h2" value="40" min="30" max="70" />
                        <label for="c3-h3-input" class="visually-hidden">Handle 3</label>
                        <input type="range" id="c3-h3-input" name="c3-h3" value="85" />
                    </range-group>
                </div>
            </section>
            <section>
                <p class="description">
                    A complete visual transformation to create a budget allocation tool. The component's
                    segments are styled as colored bars, and the thumbs as draggable separators. All labels and
                    percentages are updated via JavaScript as well as an aria-polite to give feedback to the user
                    about the current value of the slider..
                </p>
                <div class="card" style="position: relative">
                    <style>
                        #budget-range {
                            --track-height: 50px;
                            --thumb-size: 36px;
                        }
                        #budget-range::part(track) {
                            border-radius: 25px;
                            overflow: hidden;
                        }
                        #budget-range::part(thumb) {
                            border: 4px solid var(--color-card-bg);
                            background-color: white;
                            background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --%3E%3Csvg width='800px' height='800px' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:none;stroke:%23000000;stroke-linecap:round;stroke-linejoin:bevel;stroke-width:1.5px;%7D%3C/style%3E%3C/defs%3E%3Cg id='ic-chevron-left-right'%3E%3Cpath class='cls-1' d='M15.3,16.78l4.11-4.11a1,1,0,0,0,0-1.41l-4-4'/%3E%3Cpath class='cls-1' d='M8.7,7.22,4.59,11.33a1,1,0,0,0,0,1.41l4,4'/%3E%3C/g%3E%3C/svg%3E");
                            background-position: center;
                            background-repeat: no-repeat;
                            background-size: 60%;
                            box-shadow:
                                    0 4px 6px -1px rgba(0, 0, 0, 0.3),
                                    0 2px 4px -1px rgba(0, 0, 0, 0.1);
                        }

                        /* Set anchor-name on segments via a CSS variable, matching the working tooltip pattern */
                        #budget-range::part(segment) {
                            anchor-name: var(--anchor-name);
                        }
                        #budget-range::part(segment-1) {
                            background-color: #e53935;
                            --anchor-name: --budget-segment-1;
                        }
                        #budget-range::part(segment-2) {
                            background-color: #8e24aa;
                            --anchor-name: --budget-segment-2;
                        }
                        #budget-range::part(segment-3) {
                            background-color: #fdd835;
                            --anchor-name: --budget-segment-3;
                        }
                        #budget-range::part(segment-4) {
                            background-color: #3949ab;
                            --anchor-name: --budget-segment-4;
                        }

                        .budget-label {
                            position: fixed;
                            color: white;
                            /* Anchor the label to its corresponding segment part */
                            position-anchor: var(--anchor);
                            top: anchor(var(--anchor) top);
                            left: anchor(var(--anchor) center);
                            translate: 0 -50%;
                            text-align: center;
                            font-size: 0.875rem;
                            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
                            line-height: 1.2;
                            pointer-events: none; /* Allow clicks to pass through to the slider */
                        }

                        /* Assign the correct anchor name to each label using their specific IDs */
                        #budget-label-0 { --anchor: --budget-segment-1; }
                        #budget-label-1 { --anchor: --budget-segment-2; }
                        #budget-label-2 { --anchor: --budget-segment-3; }
                        #budget-label-3 { --anchor: --budget-segment-4; }

                        .budget-label strong {
                            font-size: 1rem;
                            font-weight: 700;
                        }
                    </style>
                    <div class="budget-range-wrapper">
                        <range-group id="budget-range" min="0" max="100">
                            <legend slot="legend" class="color-pink">Budget Allocator</legend>

                            <label for="budget-1" class="visually-hidden">Groceries/Rent separator</label>
                            <input type="range" id="budget-1" value="25" />
                            <label for="budget-2" class="visually-hidden">Rent/Transport separator</label>
                            <input type="range" id="budget-2" value="50" />
                            <label for="budget-3" class="visually-hidden">Transport/Internet separator</label>
                            <input type="range" id="budget-3" value="75" />
                        </range-group>
                        <div id="budget-labels" class="budget-labels">
                            <div id="budget-label-0" class="budget-label"></div>
                            <div id="budget-label-1" class="budget-label"></div>
                            <div id="budget-label-2" class="budget-label"></div>
                            <div id="budget-label-3" class="budget-label"></div>
                        </div>
                    </div>
                    <div id="budget-announcer" class="visually-hidden" aria-live="polite" role="status"></div>
                </div>
            </section>
            <section>
                <p class="description">
                    Recreating a classic slider look. This demonstrates using the CSS Anchoring API for tooltips
                    with heavy custom styling on all component parts.
                </p>
                <div class="card" style="position: relative">
                    <style>
                        #classic-range {
                            --track-height: 4px;
                            --thumb-size: 24px;
                        }
                        #classic-range::part(track) {
                            background: #444;
                            border: 1px solid #111;
                            border-radius: 0;
                            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
                        }
                        #classic-range::part(segment-2) {
                            background: #3b82f6;
                        }
                        #classic-range::part(thumb) {
                            anchor-name: var(--anchor-name);
                            background: linear-gradient(to bottom, #f9fafb, #d1d5db);
                            border: 1px solid #6b7280;
                            border-radius: 3px;
                            width: 14px;
                            height: var(--thumb-size);
                            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
                        }
                        #classic-range::part(thumb-1) {
                            --anchor-name: --classic-thumb-1;
                        }
                        #classic-range::part(thumb-2) {
                            --anchor-name: --classic-thumb-2;
                        }

                        .classic-tooltip {
                            position: absolute;
                            position-anchor: var(--anchor-name);
                            position-area: top;
                            translate: -20% -60%;

                            background: #222;
                            color: white;
                            padding: 2px 8px;
                            border-radius: 3px;
                            border: 1px solid #555;
                            font-size: 0.875rem;
                            font-weight: 600;
                            pointer-events: none;
                        }
                        #classic-tooltip-1 {
                            --anchor-name: --classic-thumb-1;
                        }
                        #classic-tooltip-2 {
                            --anchor-name: --classic-thumb-2;
                        }
                    </style>
                    <range-group id="classic-range" min="0" max="100">
                        <legend slot="legend" class="color-indigo">Classic Look with anchored Tooltips</legend>
                        <label for="classic-1" class="visually-hidden">Classic Handle 1</label>
                        <input type="range" id="classic-1" name="classic-1" value="20" />
                        <label for="classic-2" class="visually-hidden">Classic Handle 2</label>
                        <input type="range" id="classic-2" name="classic-2" value="80" />
                    </range-group>
                    <div id="classic-tooltip-1" class="classic-tooltip" aria-hidden="true">20</div>
                    <div id="classic-tooltip-2" class="classic-tooltip" aria-hidden="true">80</div>
                </div>
            </section>
            <section>
                <p class="description">
                    Use the component's public methods and properties to get and set values programmatically.
                </p>
                <div class="card">
                    <range-group id="api-range" min="0" max="500">
                        <legend slot="legend" class="color-purple">JavaScript API Interaction</legend>
                        <style>
                            #api-range::part(segment-2) {
                                background: linear-gradient(to right, var(--color-purple), var(--color-pink));
                            }
                        </style>
                        <label for="api-1-input" class="visually-hidden">API Handle 1</label>
                        <input type="range" id="api-1-input" name="api-1" value="100" />
                        <label for="api-2-input" class="visually-hidden">API Handle 2</label>
                        <input type="range" id="api-2-input" name="api-2" value="400" />
                    </range-group>
                    <div class="button-group">
                        <button id="getValuesBtn" class="btn btn-indigo">Get Values</button>
                        <button id="setValuesBtn" class="btn btn-pink">Set Random Values</button>
                    </div>
                    <pre id="apiOutput" class="api-output"></pre>
                </div>
            </section>
            <section>
                <p class="description">
                    This example shows how to style individual tick marks and their labels using CSS Parts. The '50%' tick is highlighted with a different color and height.
                </p>
                <div class="card">
                    <style>
                        #custom-ticks-example::part(tick) {
                            background: var(--color-text-muted);
                            height: 8px;
                            transition: all 0.2s ease;
                        }
                        /* Style the 3rd tick (value="50") */
                        #custom-ticks-example::part(tick-3) {
                            background: var(--color-pink);
                            height: 16px; /* Taller */
                            width: 3px;
                            transform: translateX(-1.5px); /* Re-center */
                        }
                        /* Style the 3rd tick's label */
                        #custom-ticks-example::part(tick-label-3) {
                            color: var(--color-pink);
                            font-weight: bold;
                        }
                    </style>
                    <range-group id="custom-ticks-example" min="0" max="100" list="custom-ticks-datalist">
                        <legend slot="legend" class="color-pink">Custom Tick Styling</legend>
                        <label for="custom-tick-1" class="visually-hidden">Value 1</label>
                        <input type="range" id="custom-tick-1" value="25" />
                        <label for="custom-tick-2" class="visually-hidden">Value 2</label>
                        <input type="range" id="custom-tick-2" value="75" />
                    </range-group>
                    <datalist id="custom-ticks-datalist">
                        <option value="0" label="0%"></option>
                        <option value="25"></option>
                        <option value="50" label="50%"></option>
                        <option value="75"></option>
                        <option value="100" label="100%"></option>
                    </datalist>
                </div>
            </section>
            <section>
                <p class="description">
                    A more creative example styling ticks to look like milestones on a project timeline. Key milestones are larger and have distinct colors.
                </p>
                <div class="card">
                    <style>
                        #timeline-example { --track-height: 2px; }
                        #timeline-example::part(track) { background: #555; }
                        #timeline-example::part(thumb) { --thumb-bg: var(--color-teal); }
                        #timeline-example::part(segment-2) { background: var(--color-teal); }

                        #timeline-example::part(tick) {
                            background: #888;
                            width: 2px;
                            height: 10px;
                            border-radius: 2px;
                        }
                        /* Highlight the start (1st), middle (3rd), and end (5th) ticks */
                        #timeline-example::part(tick-1),
                        #timeline-example::part(tick-3),
                        #timeline-example::part(tick-5) {
                            background: var(--color-teal);
                            height: 20px;
                            width: 4px;
                            transform: translate(-2px, -7px); /* Adjust position for height */
                        }
                        #timeline-example::part(tick-label) {
                            color: var(--color-text-muted);
                        }
                        #timeline-example::part(tick-label-1),
                        #timeline-example::part(tick-label-3),
                        #timeline-example::part(tick-label-5) {
                            color: var(--color-teal);
                            font-weight: bold;
                        }
                    </style>
                    <range-group id="timeline-example" min="0" max="100" list="timeline-datalist">
                        <legend slot="legend" class="color-teal">Styled Timeline</legend>
                        <label for="timeline-1" class="visually-hidden">Start Date</label>
                        <input type="range" id="timeline-1" value="10" />
                        <label for="timeline-2" class="visually-hidden">End Date</label>
                        <input type="range" id="timeline-2" value="90" />
                    </range-group>
                    <datalist id="timeline-datalist">
                        <option value="0" label="Q1"></option>
                        <option value="25"></option>
                        <option value="50" label="Q3"></option>
                        <option value="75"></option>
                        <option value="100" label="End"></option>
                    </datalist>
                </div>
            </section>
            <section>
                <p class="description">
                    This example uses three handles and styled ticks to represent different phases in a process, with each major tick mark having a unique color.
                </p>
                <div class="card">
                    <style>
                        #multiphase-example::part(tick) { height: 12px; width: 2px; }

                        #multiphase-example::part(tick-1) { background: #aaa; }
                        #multiphase-example::part(tick-label-1) { color: #aaa; }

                        #multiphase-example::part(tick-2) { background: #fdd835; } /* Yellow */
                        #multiphase-example::part(tick-label-2) { color: #fdd835; }

                        #multiphase-example::part(tick-3) { background: #4caf50; } /* Green */
                        #multiphase-example::part(tick-label-3) { color: #4caf50; }

                        #multiphase-example::part(tick-4) { background: #3b82f6; } /* Blue */
                        #multiphase-example::part(tick-label-4) { color: #3b82f6; }
                    </style>
                    <range-group id="multiphase-example" min="0" max="100" list="multiphase-datalist">
                        <legend slot="legend" class="color-indigo">Three-Handle Process Flow</legend>
                        <label for="multiphase-1" class="visually-hidden">Phase 1 End</label>
                        <input type="range" id="multiphase-1" value="20" />
                        <label for="multiphase-2" class="visually-hidden">Phase 2 End</label>
                        <input type="range" id="multiphase-2" value="50" />
                        <label for="multiphase-3" class="visually-hidden">Phase 3 End</label>
                        <input type="range" id="multiphase-3" value="80" />
                    </range-group>
                    <datalist id="multiphase-datalist">
                        <option value="0" label="Start"></option>
                        <option value="33" label="Review"></option>
                        <option value="66" label="Approved"></option>
                        <option value="100" label="Complete"></option>
                    </datalist>
                </div>
            </section>
        </div>
    </div>
</div>
<script type="module">
    import "./src/range-group.ts";

    document.addEventListener("DOMContentLoaded", () => {
        // --- Interactive Price Range Example ---
        const priceRange = document.getElementById("interactive-price-range");
        const minPriceInput = document.getElementById("price-min-num-input");
        const maxPriceInput = document.getElementById("price-max-num-input");

        if (priceRange && minPriceInput && maxPriceInput) {
            const syncInputsToSlider = () => {
                const [minVal, maxVal] = priceRange.values.map((v) => Math.round(v));
                minPriceInput.value = minVal;
                maxPriceInput.value = maxVal;
                minPriceInput.max = maxVal;
                maxPriceInput.min = minVal;
            };

            minPriceInput.addEventListener("input", () => {
                let value = parseInt(minPriceInput.value, 10);
                if (isNaN(value)) return;
                priceRange.setRangeValue(0, value);
                syncInputsToSlider(); // Re-sync to handle clamping
            });

            maxPriceInput.addEventListener("input", () => {
                let value = parseInt(maxPriceInput.value, 10);
                if (isNaN(value)) return;
                priceRange.setRangeValue(1, value);
                syncInputsToSlider(); // Re-sync to handle clamping
            });

            priceRange.addEventListener("change", syncInputsToSlider);
            syncInputsToSlider(); // Initial sync
        }

        // --- Budget Allocator Example ---
        const budgetRange = document.getElementById("budget-range");
        const budgetLabels = [
            document.getElementById("budget-label-0"),
            document.getElementById("budget-label-1"),
            document.getElementById("budget-label-2"),
            document.getElementById("budget-label-3"),
        ];
        const budgetCategories = ["Groceries", "Rent", "Transport", "Internet"];
        const budgetAnnouncer = document.getElementById("budget-announcer");

        if (budgetRange && budgetAnnouncer && budgetLabels.every((l) => l)) {
            const updateBudget = () => {
                const values = [0, ...budgetRange.values, 100];
                let announcementText = "Budget updated. ";

                for (let i = 0; i < budgetLabels.length; i++) {
                    const start = values[i];
                    const end = values[i + 1];
                    const percentage = Math.round(end - start);
                    const label = budgetLabels[i];

                    label.innerHTML = `<strong>${budgetCategories[i]}</strong><br>${percentage}%`;
                    announcementText += `${budgetCategories[i]}: ${percentage}%. `;
                }

                // Update the live region for screen readers
                budgetAnnouncer.textContent = announcementText.trim();
            };
            updateBudget();
            budgetRange.addEventListener("change", updateBudget);
        }

        // --- Floating Tooltip Example ---
        const floatingRange = document.getElementById("floating-tooltip-range");
        const floatingTooltip1 = document.getElementById("floating-tooltip-1");
        const floatingTooltip2 = document.getElementById("floating-tooltip-2");

        if (floatingRange && floatingTooltip1 && floatingTooltip2) {
            const tooltips = [floatingTooltip1, floatingTooltip2];
            const updateFloatingTooltips = () => {
                const values = floatingRange.values;
                if (values && values.length >= 2) {
                    tooltips[0].textContent = Math.round(values[0]);
                    tooltips[1].textContent = Math.round(values[1]);
                }
            };
            updateFloatingTooltips();
            floatingRange.addEventListener("change", updateFloatingTooltips);
        }

        // --- Classic Tooltip Example ---
        const classicRange = document.getElementById("classic-range");
        const classicTooltip1 = document.getElementById("classic-tooltip-1");
        const classicTooltip2 = document.getElementById("classic-tooltip-2");

        if (classicRange && classicTooltip1 && classicTooltip2) {
            const updateClassicTooltips = () => {
                const values = classicRange.values;
                classicTooltip1.textContent = Math.round(values[0]);
                classicTooltip2.textContent = Math.round(values[1]);
            };
            updateClassicTooltips();
            classicRange.addEventListener("change", updateClassicTooltips);
        }

        // --- API Example ---
        const apiRange = document.getElementById("api-range");
        const getValuesBtn = document.getElementById("getValuesBtn");
        const setValuesBtn = document.getElementById("setValuesBtn");
        const apiOutput = document.getElementById("apiOutput");

        if (apiRange && getValuesBtn && setValuesBtn && apiOutput) {
            getValuesBtn.addEventListener("click", () => {
                apiOutput.textContent = `Values: [${apiRange.values.join(", ")}]`;
            });

            setValuesBtn.addEventListener("click", () => {
                const val1 = Math.round(Math.random() * 500);
                const val2 = Math.round(Math.random() * 500);
                apiRange.setRangeValue(0, Math.min(val1, val2));
                apiRange.setRangeValue(1, Math.max(val1, val2));
                apiOutput.textContent = `Set to: [${apiRange.values.join(", ")}]`;
            });
        }
    });
</script>
</body>
</html>